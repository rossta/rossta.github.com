<!doctype html>
<html>
  <head>
    <title>Debugging SystemStackError - rossta.net</title>
<meta name="description" content="Prior to Ruby 2.2, debugging stack overflow errors can be painful because most of the backtrace is swallowed in the output. Learn a quick workaround with Kernel.set_trace_func." />
<meta name="keywords" content="Ruby" />
<meta name="site" content="rossta.net" />
<meta property="og:site_name" content="rossta.net" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:creator" content="Ross Kaffenberger" />
<meta name="twitter:description" content="Prior to Ruby 2.2, debugging stack overflow errors can be painful because most of the backtrace is swallowed in the output. Learn a quick workaround with Kernel.set_trace_func." />
<meta name="twitter:image:src" content="https://rossta.net/assets/images/blog/stock/logs-pexels-photo-d2559811.jpg" />
<meta name="twitter:title" content="Debugging SystemStackError" />
<meta property="og:description" content="Prior to Ruby 2.2, debugging stack overflow errors can be painful because most of the backtrace is swallowed in the output. Learn a quick workaround with Kernel.set_trace_func." />
<meta property="og:image" content="https://rossta.net/assets/images/blog/stock/logs-pexels-photo-d2559811.jpg" />
<meta property="og:title" content="Debugging SystemStackError" />
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="mobile-web-app-capable" content="yes">

    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon"                      href="/apple-touch-icon.png" />
    <link rel="icon"                                  href="/touch-icon-192x192.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="/touch-icon-192x192.png" />
    <link rel="icon" type="image/png" sizes="144x144" href="/touch-icon-144x144.png" />
    <link rel="icon" type="image/png" sizes="96x96"   href="/touch-icon-96x96.png" />
    <link rel="icon" type="image/png" sizes="72x72"   href="/touch-icon-72x72.png" />
    <link rel="icon" type="image/png" sizes="48x48"   href="/touch-icon-48x48.png">
    <link rel="icon" type="image/png" sizes="36x36"   href="/touch-icon-36x36.png">
    <link rel="icon" type="image/png" sizes="36x36"   href="/touch-icon-36x36.png">
    <link rel="icon" type="image/png" sizes="32x32"   href="/touch-icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16"   href="/touch-icon-16x16.png">

    <link rel="mask-icon" href="/safari-pinned-tab-5cdca7ae.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">

    <link rel="pingback" href="https://webmention.io/rossta.net/xmlrpc" />
    <link rel="webmention" href="https://webmention.io/rossta.net/webmention" />

    <script type="text/javascript" src="//use.typekit.net/ned0mml.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    <link href="/assets/stylesheets/app-175a1cd4.css" rel="stylesheet" />
  </head>
  <body id="application" class="typekit">
    <nav id="welcome-nav" class="top-bar" data-topbar>
  <ul class="title-area">
    <li class="name">
      <h1><a class="logo" href="/"><img src="/assets/images/turtle-logo-096698b6.svg" alt="Turtle logo" /><span>rossta.net</span></a></h1>
    </li>
    <li class="toggle-topbar menu-icon"><a href="#">Menu</a></li>
  </ul>

  <section class="top-bar-section">
    <ul class="left">
      <li class="nav"><a href="/blog">blog</a></li>
      <li class="nav"><a href="/series">series</a></li>
      <li class="nav"><a href="/talks">talks</a></li>
      <li class="nav"><a href="/projects">projects</a></li>
      <li class="nav"><a href="/about">about</a></li>
      <li class="nav"><a href="/feed.xml">feed</a></li>
    </ul>
  </section>
</nav>

    <div class="row">
      <section id="main" role="main" class="large-12 small-12 columns">
          <section id="blog" class="margin-bottom double">
    <article class="post margin-bottom double">
      <header class="page-header with-summary">
  <h1>
    Debugging SystemStackError
  </h1>
    <h3>
      Use Kernel tracing to inspect method Ruby method calls
    </h3>
</header>


      <p>Arrgggh. Ever come across this in your Ruby app?</p>

<pre><code class="bash">SystemStackError: stack level too deep
    /Users/ross/dev/rossta/montrose/lib/montrose/options.rb:204
</code></pre>

<p>A <code>SystemStackError</code> occurs when your Ruby code encounters a stack overflow; in
other words, the memory allocated to execute the program exceeded the memory
available on the stack.</p>

<p>The most common cause of a stack overflow in application code that
recursively calls itself without terminating arguments: an infinite loop in your
code.</p>

<p>You can reproduce such an error with code like this in a terminal:</p>

<pre><code class="bash">$ pry --noprompt
def foo
  foo
end
=&gt; :foo
foo
SystemStackError: stack level too deep
from /Users/ross/.gem/ruby/2.1.6/gems/pry-0.10.3/lib/pry/pry_instance.rb:355
</code></pre>

<p>Note: for the examples in this post, assume I&#39;m using Ruby 2.1 unless otherwise
indicated.</p>

<pre><code class="json">$ ruby -v
ruby 2.1.6p336 (2015-04-13 revision 50298) [x86_64-darwin14.0]
</code></pre>

<p>Prior to Ruby 2.2 and <a href="https://bugs.ruby-lang.org/issues/6216">this issue</a>, the
backtrace for <code>SystemStackError</code> was reduced to one line. That meant, unless
that one line lead you to an obvious culprit in your source code, it
would be very difficult to unravel the method calls causing the stack to overflow.</p>

<p>So, first step in debugging the <code>SystemStackError</code> is upgrade to Ruby 2.2!</p>

<p>In case that&#39;s not possible, there&#39;s still hope. Let&#39;s try using information
from the error first. Here&#39;s the method containing <a href="https://github.com/rossta/montrose/blob/e5b7a12f6832b4f971a52b27800cefe144ecd399/lib/montrose/options.rb#L204">the line in the backtrace</a>:</p>

<pre><code class="ruby"># lib/montrose/options.rb:204

def map_arg(arg, &amp;block)
  return nil unless arg

  Array(arg).map(&amp;block)    # line 204
end
</code></pre>

<p>No obvious culprit. This method doesn&#39;t call itself and there are multiple callers
of this method in this class.</p>

<p>Let&#39;s try rescuing from the error in a test and printing the execution stack
using <a href="http://ruby-doc.org/core-2.2.3/Kernel.html#method-i-caller"><code>Kernel.caller</code></a>. I can isolate the application code that produces the stack overflow in a single test and rescue there.</p>

<pre><code class="ruby">it &quot;a test&quot; do
  # given

  begin
    # when
  rescue SystemStackError
    puts caller
  end

  # then
end
</code></pre>

<p>Here&#39;s what I get:</p>

<pre><code class="bash">$ bin/m spec/rfc_spec.rb:426
/Users/ross/dev/rossta/montrose/spec/rfc_spec.rb:434:in `block (2 levels) in &lt;top (required)&gt;&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest/test.rb:108:in `block (3 levels) in run&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest/test.rb:205:in `capture_exceptions&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest/test.rb:105:in `block (2 levels) in run&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest/test.rb:256:in `time_it&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest/test.rb:104:in `block in run&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest.rb:334:in `on_signal&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest/test.rb:276:in `with_info_handler&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest/test.rb:103:in `run&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest.rb:781:in `run_one_method&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest.rb:308:in `run_one_method&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest.rb:296:in `block (2 levels) in run&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest.rb:295:in `each&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest.rb:295:in `block in run&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest.rb:334:in `on_signal&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest.rb:321:in `with_info_handler&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest.rb:294:in `run&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest.rb:155:in `block in __run&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest.rb:155:in `map&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest.rb:155:in `__run&#39;
/Users/ross/.gem/ruby/2.1.6/gems/minitest-5.8.3/lib/minitest.rb:129:in `run&#39;
/Users/ross/.gem/ruby/2.1.6/gems/m-1.4.2/lib/m/runners/minitest_5.rb:9:in `run&#39;
/Users/ross/.gem/ruby/2.1.6/gems/m-1.4.2/lib/m/executor.rb:26:in `execute&#39;
/Users/ross/.gem/ruby/2.1.6/gems/m-1.4.2/lib/m/runner.rb:17:in `run&#39;
/Users/ross/.gem/ruby/2.1.6/gems/m-1.4.2/lib/m.rb:13:in `run&#39;
/Users/ross/.gem/ruby/2.1.6/gems/m-1.4.2/bin/m:4:in `&lt;top (required)&gt;&#39;
bin/m:16:in `load&#39;
bin/m:16:in `&lt;main&gt;&#39;
</code></pre>

<p>The backtrace points to lines in minitest. Since I&#39;ve been running tests prior
to this isssue successfully, it&#39;s unlikely minitest is the source of the stack overflow error. So rescuing from <code>SytemStackError</code> doesn&#39;t help us either.</p>

<p>Luckily, we have <a href="https://gist.github.com/jbgo/4493822">this gist</a> from
<a href="https://github.com/jbgo">@jbgo</a> who highlighted a special feature in Ruby for
tracing function events: <a href="http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-set_trace_func"><code>Kernel.set_trace_func</code></a>.</p>

<p>Here&#39;s the example from the docs:</p>

<pre><code class="ruby">class Test
  def test
    a = 1
    b = 2
  end
end

set_trace_func proc { |event, file, line, id, binding, classname|
  printf &quot;%8s %s:%-2d %10s %8s\n&quot;, event, file, line, id, classname
}
t = Test.new
t.test

    line prog.rb:11               false
  c-call prog.rb:11        new    Class
  c-call prog.rb:11 initialize   Object
c-return prog.rb:11 initialize   Object
c-return prog.rb:11        new    Class
    line prog.rb:12               false
    call prog.rb:2        test     Test
    line prog.rb:3        test     Test
    line prog.rb:4        test     Test
  return prog.rb:4        test     Test
</code></pre>

<p>The method <code>set_trace_func</code> sets a global proc to be invoked in response to
runtime events including the following:</p>

<ul>
<li><code>c-call</code> a C-language routine</li>
<li><code>c-return</code> return from a C-language routine</li>
<li><code>call</code> a Ruby method</li>
<li><code>class</code> start a class or module definition</li>
<li><code>end</code> finish a class or module definition</li>
<li><code>line</code> execute code on a new line</li>
<li><code>raise</code> raise an exception</li>
<li><code>return</code> return from a Ruby method</li>
</ul>

<p>Since we want to isolate the Ruby method causing the infinite loop in our stack,
we&#39;ll log the line info for <code>call</code> events:</p>

<pre><code class="ruby"># spec/spec_helper.rb

$trace_out = open(&quot;trace.txt&quot;)

set_trace_func proc { |event, file, line, id, binding, classname|
  if event == &#39;call&#39;
    $trace_out.puts &quot;#{file}:#{line} #{classname}##{id}&quot;
  end
}
</code></pre>

<p>Re-running the test produces a <code>trace.txt</code> file that records all the Ruby method
calls encountered during execution. Inspecting this log, we hope to find a
repeating pattern of an identical list of method calls.</p>

<p>In my case, the start of each pattern pointed to another line in my source where
the stack originates:</p>

<pre><code>/Users/ross/dev/rossta/montrose/lib/montrose/stack.rb:38 Montrose::Stack#advance
/Users/ross/dev/rossta/montrose/lib/montrose/frequency/yearly.rb:4 Montrose::Frequency::Yearly#include?
/Users/ross/dev/rossta/montrose/lib/montrose/frequency.rb:51 Montrose::Frequency#matches_interval?
...
/Users/ross/dev/rossta/montrose/lib/montrose/stack.rb:38 Montrose::Stack#advance
/Users/ross/dev/rossta/montrose/lib/montrose/frequency/yearly.rb:4 Montrose::Frequency::Yearly#include?
/Users/ross/dev/rossta/montrose/lib/montrose/frequency.rb:51 Montrose::Frequency#matches_interval?
...
/Users/ross/dev/rossta/montrose/lib/montrose/stack.rb:38 Montrose::Stack#advance
/Users/ross/dev/rossta/montrose/lib/montrose/frequency/yearly.rb:4 Montrose::Frequency::Yearly#include?
/Users/ross/dev/rossta/montrose/lib/montrose/frequency.rb:51 Montrose::Frequency#matches_interval?
...
</code></pre>

<p>A useful trick is to keep the trace routine in a separate file that you can
incorporate with an environment variable. You can also leverage <code>Kernel.caller</code>
here and only log when the stack exceeds an arbitrarily large size.</p>

<pre><code class="ruby"># spec/support/trace.rb

if ENV[&quot;TRACE&quot;]
  $stack_size = ENV[&quot;TRACE&quot;].to_i
  $trace_out = open(&quot;trace.txt&quot;)

  set_trace_func proc { |event, file, line, id, binding, classname|
    if event == &#39;call&#39; &amp;&amp; caller.length &gt; $stack_size
      $trace_out.puts &quot;#{file}:#{line} #{classname}##{id}&quot;
    end
  }
end
</code></pre>

<p>In my <a href="https://github.com/rossta/montrose">Montrose</a> gem, <a href="https://github.com/rossta/montrose/blob/9600e0b63bde342011b3b9b1e29ab9f76f5f69c3/spec/support/trace.rb">this file</a> gets loaded during every test run but the <code>set_trace_func</code> hook will
only be evaluated when the <code>TRACE</code> environment variable is present:</p>

<pre><code>$ TRACE=500 bin/m spec/montrose/recurrence_spec.rb
</code></pre>

<p>Again, you won&#39;t need to resort to this workaround for <code>SystemStackError</code> in Ruby
2.2+, but keep this in mind next time you get stuck &quot;in the loop&quot;.</p>

    </article>

    <section class="signup-form-standalone margin-bottom quadruple">
      <script src="https://f.convertkit.com/ckjs/ck.5.js"></script>
<form
  action="https://app.convertkit.com/forms/818387/subscriptions?ref=Ruby"
  class="seva-form formkit-form"
  method="post"
  data-sv-form="818387"
  data-uid="cda82aafbf"
  data-format="inline"
  data-version="5"
  data-options="{&quot;settings&quot;:{&quot;after_subscribe&quot;:{&quot;action&quot;:&quot;message&quot;,&quot;success_message&quot;:&quot;Success! Now check your email to confirm your subscription.&quot;,&quot;redirect_url&quot;:&quot;&quot;},&quot;modal&quot;:{&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:&quot;300&quot;,&quot;devices&quot;:null,&quot;show_once_every&quot;:&quot;7&quot;},&quot;recaptcha&quot;:{&quot;enabled&quot;:false},&quot;return_visitor&quot;:{&quot;action&quot;:&quot;show&quot;,&quot;custom_content&quot;:&quot;&quot;},&quot;slide_in&quot;:{&quot;display_in&quot;:null,&quot;trigger&quot;:null,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:null,&quot;devices&quot;:null,&quot;show_once_every&quot;:null}}}"
  min-width="400 500 600 700 800"
>
  <div data-style="clean">
      <h3>
  Did you like this post?
</h3>
<p>
  Please
  <b><a href="https://twitter.com/intent/tweet?text=Debugging%20SystemStackError&amp;url=https%3A%2F%2Frossta.net%2Fblog%2Fdebugging-systemstackerror.html" target="_blank" rel="noopener">share it on Twitter</a></b>
  and enter your email below to subscribe to my newsletter on
  Ruby and the web. Thank you!
</p>

    <ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul>
    <div data-element="fields" data-stacked="false" class="seva-fields formkit-fields">
      <div class="formkit-field">
        <input
          class="formkit-input"
          name="email_address"
          placeholder="Your email address"
          required=""
          type="text"
          style="border-color: rgb(227, 227, 227); border-radius: 4px; color: rgb(0, 0, 0); font-weight: 400;"
        />
      </div>
      <button
        data-element="submit"
        class="formkit-submit formkit-submit"
        style="background-color: rgb(22, 119, 190); border-radius: 4px; color: rgb(255, 255, 255); font-weight: 400;"
      >
        <div class="formkit-spinner">
          <div></div>
          <div></div>
          <div></div>
        </div>
        <span>Subscribe</span>
      </button>
    </div>
    <a
      href="https://convertkit.com/?utm_source=dynamic&amp;utm_medium=referral&amp;utm_campaign=poweredby&amp;utm_content=form"
      class="formkit-powered-by"
      data-element="powered-by"
      target="_blank"
      rel="noopener noreferrer"
      >Powered By ConvertKit</a
    >
  </div>
  <style>
    .formkit-form[data-uid='cda82aafbf'] * {
      font-family: 'Helvetica Neue', Helvetica, Arial, Verdana, sans-serif;
      box-sizing: border-box;
    }
    .formkit-form[data-uid='cda82aafbf'] legend {
      border: none;
      font-size: inherit;
      margin-bottom: 10px;
      padding: 0;
      position: relative;
      display: table;
    }
    .formkit-form[data-uid='cda82aafbf'] fieldset {
      border: 0;
      padding: 0.01em 0 0 0;
      margin: 0;
      min-width: 0;
    }
    .formkit-form[data-uid='cda82aafbf'] body:not(:-moz-handler-blocked) fieldset {
      display: table-cell;
    }

    .formkit-form[data-uid='cda82aafbf'][data-format='modal'] {
      display: none;
    }
    .formkit-form[data-uid='cda82aafbf'][data-format='slide in'] {
      display: none;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-input,
    .formkit-form[data-uid='cda82aafbf'] .formkit-select,
    .formkit-form[data-uid='cda82aafbf'] .formkit-checkboxes {
      width: 100%;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-button,
    .formkit-form[data-uid='cda82aafbf'] .formkit-submit {
      border: 0;
      border-radius: 5px;
      color: #ffffff;
      cursor: pointer;
      display: inline-block;
      text-align: center;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      margin-bottom: 15px;
      overflow: hidden;
      padding: 0;
      position: relative;
      vertical-align: middle;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-button:hover,
    .formkit-form[data-uid='cda82aafbf'] .formkit-submit:hover,
    .formkit-form[data-uid='cda82aafbf'] .formkit-button:focus,
    .formkit-form[data-uid='cda82aafbf'] .formkit-submit:focus {
      outline: none;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-button:hover > span,
    .formkit-form[data-uid='cda82aafbf'] .formkit-submit:hover > span,
    .formkit-form[data-uid='cda82aafbf'] .formkit-button:focus > span,
    .formkit-form[data-uid='cda82aafbf'] .formkit-submit:focus > span {
      background-color: rgba(0, 0, 0, 0.1);
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-button > span,
    .formkit-form[data-uid='cda82aafbf'] .formkit-submit > span {
      display: block;
      -webkit-transition: all 300ms ease-in-out;
      transition: all 300ms ease-in-out;
      padding: 12px 24px;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-input {
      background: #ffffff;
      font-size: 15px;
      padding: 12px;
      border: 1px solid #e3e3e3;
      -webkit-flex: 1 0 auto;
      -ms-flex: 1 0 auto;
      flex: 1 0 auto;
      line-height: 1.4;
      margin: 0;
      -webkit-transition: border-color ease-out 300ms;
      transition: border-color ease-out 300ms;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-input:focus {
      outline: none;
      border-color: #1677be;
      -webkit-transition: border-color ease 300ms;
      transition: border-color ease 300ms;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-input::-webkit-input-placeholder {
      color: #848585;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-input::-moz-placeholder {
      color: #848585;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-input:-ms-input-placeholder {
      color: #848585;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-input::placeholder {
      color: #848585;
    }
    .formkit-form[data-uid='cda82aafbf'] [data-group='dropdown'] {
      position: relative;
      display: inline-block;
      width: 100%;
    }
    .formkit-form[data-uid='cda82aafbf'] [data-group='dropdown']::before {
      content: '';
      top: calc(50% - 2.5px);
      right: 10px;
      position: absolute;
      pointer-events: none;
      border-color: #4f4f4f transparent transparent transparent;
      border-style: solid;
      border-width: 6px 6px 0 6px;
      height: 0;
      width: 0;
      z-index: 999;
    }
    .formkit-form[data-uid='cda82aafbf'] [data-group='dropdown'] select {
      height: auto;
      width: 100%;
      cursor: pointer;
      color: #333333;
      line-height: 1.4;
      margin-bottom: 0;
      padding: 0 6px;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      font-size: 15px;
      padding: 12px;
      padding-right: 25px;
      border: 1px solid #e3e3e3;
      background: #ffffff;
    }
    .formkit-form[data-uid='cda82aafbf'] [data-group='dropdown'] select:focus {
      outline: none;
    }
    .formkit-form[data-uid='cda82aafbf'] [data-group='checkboxes'] {
      text-align: left;
      margin: 0;
    }
    .formkit-form[data-uid='cda82aafbf'] [data-group='checkboxes'] [data-group='checkbox'] {
      margin-bottom: 10px;
    }
    .formkit-form[data-uid='cda82aafbf'] [data-group='checkboxes'] [data-group='checkbox'] * {
      cursor: pointer;
    }
    .formkit-form[data-uid='cda82aafbf']
      [data-group='checkboxes']
      [data-group='checkbox']:last-of-type {
      margin-bottom: 0;
    }
    .formkit-form[data-uid='cda82aafbf']
      [data-group='checkboxes']
      [data-group='checkbox']
      input[type='checkbox'] {
      display: none;
    }
    .formkit-form[data-uid='cda82aafbf']
      [data-group='checkboxes']
      [data-group='checkbox']
      input[type='checkbox']
      + label::after {
      content: none;
    }
    .formkit-form[data-uid='cda82aafbf']
      [data-group='checkboxes']
      [data-group='checkbox']
      input[type='checkbox']:checked
      + label::after {
      border-color: #ffffff;
      content: '';
    }
    .formkit-form[data-uid='cda82aafbf']
      [data-group='checkboxes']
      [data-group='checkbox']
      input[type='checkbox']:checked
      + label::before {
      background: #10bf7a;
      border-color: #10bf7a;
    }
    .formkit-form[data-uid='cda82aafbf'] [data-group='checkboxes'] [data-group='checkbox'] label {
      position: relative;
      display: inline-block;
      padding-left: 28px;
    }
    .formkit-form[data-uid='cda82aafbf']
      [data-group='checkboxes']
      [data-group='checkbox']
      label::before,
    .formkit-form[data-uid='cda82aafbf']
      [data-group='checkboxes']
      [data-group='checkbox']
      label::after {
      position: absolute;
      content: '';
      display: inline-block;
    }
    .formkit-form[data-uid='cda82aafbf']
      [data-group='checkboxes']
      [data-group='checkbox']
      label::before {
      height: 16px;
      width: 16px;
      border: 1px solid #e3e3e3;
      background: #ffffff;
      left: 0px;
      top: 3px;
    }
    .formkit-form[data-uid='cda82aafbf']
      [data-group='checkboxes']
      [data-group='checkbox']
      label::after {
      height: 4px;
      width: 8px;
      border-left: 2px solid #4d4d4d;
      border-bottom: 2px solid #4d4d4d;
      -webkit-transform: rotate(-45deg);
      -ms-transform: rotate(-45deg);
      transform: rotate(-45deg);
      left: 4px;
      top: 8px;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-alert {
      background: #f9fafb;
      border: 1px solid #e3e3e3;
      border-radius: 5px;
      -webkit-flex: 1 0 auto;
      -ms-flex: 1 0 auto;
      flex: 1 0 auto;
      list-style: none;
      margin: 25px auto;
      padding: 12px;
      text-align: center;
      width: 100%;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-alert:empty {
      display: none;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-alert-success {
      background: #d3fbeb;
      border-color: #10bf7a;
      color: #0c905c;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-alert-error {
      background: #fde8e2;
      border-color: #f2643b;
      color: #ea4110;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-spinner {
      display: -webkit-box;
      display: -webkit-flex;
      display: -ms-flexbox;
      display: flex;
      height: 0px;
      width: 0px;
      margin: 0 auto;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      width: 0px;
      overflow: hidden;
      text-align: center;
      -webkit-transition: all 300ms ease-in-out;
      transition: all 300ms ease-in-out;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-spinner > div {
      margin: auto;
      width: 12px;
      height: 12px;
      background-color: #fff;
      opacity: 0.3;
      border-radius: 100%;
      display: inline-block;
      -webkit-animation: formkit-bouncedelay-formkit-form-data-uid-cda82aafbf- 1.4s infinite
        ease-in-out both;
      animation: formkit-bouncedelay-formkit-form-data-uid-cda82aafbf- 1.4s infinite ease-in-out
        both;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-spinner > div:nth-child(1) {
      -webkit-animation-delay: -0.32s;
      animation-delay: -0.32s;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-spinner > div:nth-child(2) {
      -webkit-animation-delay: -0.16s;
      animation-delay: -0.16s;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-submit[data-active] .formkit-spinner {
      opacity: 1;
      height: 100%;
      width: 50px;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-submit[data-active] .formkit-spinner ~ span {
      opacity: 0;
    }
    @-webkit-keyframes formkit-bouncedelay-formkit-form-data-uid-cda82aafbf- {
      0%,
      80%,
      100% {
        -webkit-transform: scale(0);
        -ms-transform: scale(0);
        transform: scale(0);
      }
      40% {
        -webkit-transform: scale(1);
        -ms-transform: scale(1);
        transform: scale(1);
      }
    }
    @keyframes formkit-bouncedelay-formkit-form-data-uid-cda82aafbf- {
      0%,
      80%,
      100% {
        -webkit-transform: scale(0);
        -ms-transform: scale(0);
        transform: scale(0);
      }
      40% {
        -webkit-transform: scale(1);
        -ms-transform: scale(1);
        transform: scale(1);
      }
    }
    .formkit-form[data-uid='cda82aafbf'] {
      max-width: 700px;
    }
    .formkit-form[data-uid='cda82aafbf'] [data-style='clean'] {
      width: 100%;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-fields {
      display: -webkit-box;
      display: -webkit-flex;
      display: -ms-flexbox;
      display: flex;
      -webkit-flex-wrap: wrap;
      -ms-flex-wrap: wrap;
      flex-wrap: wrap;
      margin: 0 auto;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-field,
    .formkit-form[data-uid='cda82aafbf'] .formkit-submit {
      margin: 0 0 15px 0;
      -webkit-flex: 1 0 100%;
      -ms-flex: 1 0 100%;
      flex: 1 0 100%;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-powered-by {
      color: #7d7d7d;
      display: block;
      font-size: 12px;
      margin: 0;
      text-align: center;
    }
    .formkit-form[data-uid='cda82aafbf'] .formkit-powered-by[data-active='false'] {
      opacity: 0.5;
    }
    .formkit-form[data-uid='cda82aafbf'][min-width~='700'] [data-style='clean'],
    .formkit-form[data-uid='cda82aafbf'][min-width~='800'] [data-style='clean'] {
      padding: 10px;
    }
    .formkit-form[data-uid='cda82aafbf'][min-width~='700'] .formkit-fields[data-stacked='false'],
    .formkit-form[data-uid='cda82aafbf'][min-width~='800'] .formkit-fields[data-stacked='false'] {
      margin-left: -5px;
      margin-right: -5px;
    }
    .formkit-form[data-uid='cda82aafbf'][min-width~='700']
      .formkit-fields[data-stacked='false']
      .formkit-field,
    .formkit-form[data-uid='cda82aafbf'][min-width~='800']
      .formkit-fields[data-stacked='false']
      .formkit-field,
    .formkit-form[data-uid='cda82aafbf'][min-width~='700']
      .formkit-fields[data-stacked='false']
      .formkit-submit,
    .formkit-form[data-uid='cda82aafbf'][min-width~='800']
      .formkit-fields[data-stacked='false']
      .formkit-submit {
      margin: 0 5px 15px 5px;
    }
    .formkit-form[data-uid='cda82aafbf'][min-width~='700']
      .formkit-fields[data-stacked='false']
      .formkit-field,
    .formkit-form[data-uid='cda82aafbf'][min-width~='800']
      .formkit-fields[data-stacked='false']
      .formkit-field {
      -webkit-flex: 100 1 auto;
      -ms-flex: 100 1 auto;
      flex: 100 1 auto;
    }
    .formkit-form[data-uid='cda82aafbf'][min-width~='700']
      .formkit-fields[data-stacked='false']
      .formkit-submit,
    .formkit-form[data-uid='cda82aafbf'][min-width~='800']
      .formkit-fields[data-stacked='false']
      .formkit-submit {
      -webkit-flex: 1 1 auto;
      -ms-flex: 1 1 auto;
      flex: 1 1 auto;
    }
  </style>
    <input type="hidden" name="tags[]" value="733960" />
  <input type="hidden" aria-label="URL" name="fields[URL]" placeholder="URL" value="https://rossta.net/blog/2016-01-12-debugging-systemstackerror.html" />
</form>


    </section>
    <article>
        <figure>
          <img src="/assets/images/blog/stock/logs-pexels-photo-d2559811.jpg" alt="Logs pexels photo" />
        </figure>
    </article>
    <section class="margin-bottom double">
      <p>
        Published on Jan 12, 2016
      </p>
    </section>
  </section>
    <hr />
    <section class="comments">
      <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname  = "rosskaff";
    var disqus_identifier = "debugging-systemstackerror";
    var disqus_title      = "Debugging SystemStackError";
    var disqus_url        = "https://rossta.net/blog/debugging-systemstackerror.html";

    var disqus_config = function () {
        this.page.url = disqus_url;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = disqus_identifier; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        this.page.title = disqus_title;
    };

    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//rosskaff.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

<!-- <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a> -->

    </section>

      </section>
    </div>
    
    <footer>
  <div class="row">
    <img src="/assets/images/turtle-logo-096698b6.svg" class="turtle" alt="Turtle logo" />
    <section class="large-6 columns">
      <h5>Most Popular</h5>
      <ul>
          <li><a href="/blog/building-a-pdf-viewer-with-vue-part-1.html">Rendering PDF pages with PDF.js and Vue</a></li>
          <li><a href="/blog/local-ssl-for-rails-5.html">Local SSL for Rails 5 development and tests</a></li>
          <li><a href="/blog/from-sprockets-to-webpack.html">How we switched from Sprockets to Webpack</a></li>
          <li><a href="/blog/web-push-notifications-from-rails.html">Sending Web Push Notifications from Rails</a></li>
          <li><a href="/blog/how-to-specify-local-ruby-gems-in-your-gemfile.html">How to specify local Ruby gems in your Gemfile</a></li>
      </ul>
    </section>
    <section class="large-3 columns">
      <h5>Categories</h5>
      <ul>
          <li><a href="/blog/tags/ruby.html">Ruby</a></li>
          <li><a href="/blog/tags/rails.html">Rails</a></li>
          <li><a href="/blog/tags/javascript.html">JavaScript</a></li>
          <li><a href="/blog/tags/vue.html">Vue</a></li>
          <li><a href="/blog/tags/service-worker.html">Service Worker</a></li>
      </ul>
    </section>
    <section class="large-3 columns">
      <h5>Contact</h5>
      <ul>
        <li><a href="mailto:ross@rossta.net" rel="me noopener">email</a></li>
        <li><a href="https://twitter.com/rossta" rel="me noopener">twitter</a></li>
        <li><a href="https://medium.com/@rossta" rel="me noopener">medium</a></li>
        <li><a href="https://github.com/rossta" rel="me noopener">github</a></li>
        <!-- <li><a href="https://stackoverflow.com/users/771838/rossta?tab=profile" rel="me">stackoverflow</a></li> -->
        <li><a href="https://www.linkedin.com/in/rosskaffenberger" rel="me noopener">linkedin</a></li>
      </ul>
    </section>
  </div>
  <p class="copyright small subtle center">
    Â© 2019 Ross Kaffenberger. All rights reserved.
  </p>
</footer>

    <script src="/runtime-3fa7456e.js"></script><script src="/vendor-0116f3b0.js"></script><script src="/app-ed1e4144.js"></script>
    
    <script type="text/javascript">
!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
analytics.load("NdBtrprkAGAjQryMShljRdVf90saElAU");
analytics.page()
window.$.tracking.flush(analytics);
}}();
</script>

  </body>
</html>
